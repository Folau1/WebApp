# Telegram WebApp Shop

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π Telegram WebApp –º–∞–≥–∞–∑–∏–Ω —Å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å—é, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π YooKassa –¥–ª—è –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ –°–ë–ü, –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Ç–æ–≤–∞—Ä–∞–º–∏.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üì± **Telegram WebApp** - –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω –≤–Ω—É—Ç—Ä–∏ Telegram
- üí≥ **–û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –°–ë–ü** - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å YooKassa
- üõçÔ∏è **–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤** - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏, –ø–æ–∏—Å–∫, —Ñ–∏–ª—å—Ç—Ä—ã
- üõí **–ö–æ—Ä–∑–∏–Ω–∞** - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤, –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
- üí∏ **–°–∫–∏–¥–∫–∏** - –ü—Ä–æ–º–æ–∫–æ–¥—ã, –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–µ –∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∫–∏–¥–∫–∏
- üì∏ **–ú–µ–¥–∏–∞** - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤
- üë®‚Äçüíº **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏, –∑–∞–∫–∞–∑–∞–º–∏, —Å–∫–∏–¥–∫–∞–º–∏
- ü§ñ **Telegram –±–æ—Ç** - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–∫–∞–∑–∞—Ö, –∫–æ–º–∞–Ω–¥—ã
- üê≥ **Docker** - –ü—Ä–æ—Å—Ç–æ–π –¥–µ–ø–ª–æ–π –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### Backend
- Node.js + Express + TypeScript
- PostgreSQL + Prisma ORM
- JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- YooKassa API
- S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (MinIO)

### Frontend
- React + TypeScript + Vite
- Telegram WebApp SDK
- Zustand –¥–ª—è state management
- TailwindCSS
- React Router

### DevOps
- Docker + Docker Compose
- Nginx reverse proxy
- GitHub Actions ready

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 18+
- Docker –∏ Docker Compose
- Telegram Bot Token
- YooKassa –∞–∫–∫–∞—É–Ω—Ç (–¥–ª—è production)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/yourusername/telegram-webapp-shop.git
cd telegram-webapp-shop
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –ø—Ä–∏–º–µ—Ä–∞ –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è:

```bash
cp env.example .env
```

–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
- `BOT_TOKEN` - —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ Telegram –±–æ—Ç–∞
- `WEBAPP_URL` - URL –≤–∞—à–µ–≥–æ WebApp (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: https://localhost:8080)
- `ADMIN_CHAT_ID` - ID —á–∞—Ç–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- `YK_SHOP_ID` –∏ `YK_SECRET_KEY` - –¥–∞–Ω–Ω—ã–µ YooKassa

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

### 4. –ó–∞–ø—É—Å–∫ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

#### –ó–∞–ø—É—Å–∫ –ë–î –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:
```bash
docker-compose -f docker-compose.dev.yml up -d
```

#### –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î:
```bash
npm run prisma:migrate
npm run prisma:seed
```

#### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:
```bash
npm run dev
```

–°–µ—Ä–≤–∏—Å—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –∞–¥—Ä–µ—Å–∞–º:
- WebApp: http://localhost:5173
- Admin: http://localhost:5174
- API: http://localhost:3000
- MinIO Console: http://localhost:9001

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/botfather)
2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ `.env`
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ WebApp:
   ```
   /setmenubutton - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è WebApp
   ```

## üê≥ Production –¥–µ–ø–ª–æ–π

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Docker Compose

```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down
```

### –î–µ–ø–ª–æ–π –Ω–∞ VPS

1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω –∏ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
2. –û–±–Ω–æ–≤–∏—Ç–µ `WEBAPP_URL` –∏ –¥—Ä—É–≥–∏–µ URL –≤ `.env`
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ production –ø—Ä–æ—Ñ–∏–ª—å:
   ```bash
   docker-compose --profile production up -d
   ```

### –î–µ–ø–ª–æ–π –Ω–∞ –æ–±–ª–∞—á–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

#### Render.com
- –°–æ–∑–¥–∞–π—Ç–µ Web Service –¥–ª—è backend
- –°–æ–∑–¥–∞–π—Ç–µ Static Site –¥–ª—è frontend
- –î–æ–±–∞–≤—å—Ç–µ PostgreSQL –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

#### Fly.io
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `fly.toml` –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- –î–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ `fly deploy`

## üìö –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îú‚îÄ‚îÄ web/          # React WebApp
‚îÇ   ‚îú‚îÄ‚îÄ admin/        # React Admin Panel
‚îÇ   ‚îî‚îÄ‚îÄ bot/          # Telegram Bot
‚îú‚îÄ‚îÄ server/           # Backend API
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/   # API endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas/  # Zod schemas
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/    # Helpers
‚îÇ   ‚îî‚îÄ‚îÄ prisma/       # Database schema
‚îú‚îÄ‚îÄ infra/            # Infrastructure configs
‚îî‚îÄ‚îÄ docker-compose.yml
```

## üîß –ö–æ–º–∞–Ω–¥—ã

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
npm run dev              # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
npm run dev:server       # –¢–æ–ª—å–∫–æ backend
npm run dev:web          # –¢–æ–ª—å–∫–æ WebApp
npm run dev:admin        # –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∫–∞
npm run dev:bot          # –¢–æ–ª—å–∫–æ –±–æ—Ç
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```bash
npm run prisma:generate  # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma Client
npm run prisma:migrate   # –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
npm run prisma:seed      # –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
npm run prisma:studio    # GUI –¥–ª—è –ë–î
```

### –°–±–æ—Ä–∫–∞
```bash
npm run build            # –°–±–æ—Ä–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose build     # Docker —Å–±–æ—Ä–∫–∞
```

## üí≥ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ YooKassa

1. –ü–æ–ª—É—á–∏—Ç–µ Shop ID –∏ Secret Key –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ YooKassa
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ URL –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π: `https://yourdomain.com/api/payments/yookassa/webhook`
3. –í–∫–ª—é—á–∏—Ç–µ –º–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã –°–ë–ü
4. –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ YooKassa

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ sensitive –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞–¥–º–∏–Ω-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è Telegram InitData –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- Rate limiting –¥–ª—è API
- CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- Helmet –¥–ª—è security headers

## üìù API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `POST /api/auth/admin/login` - –≤—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω–∫—É
- `POST /api/auth/telegram/validate` - –≤–∞–ª–∏–¥–∞—Ü–∏—è Telegram –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### –ö–∞—Ç–∞–ª–æ–≥
- `GET /api/catalog/categories` - —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- `GET /api/catalog/products` - —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
- `GET /api/catalog/products/:slug` - –¥–µ—Ç–∞–ª–∏ —Ç–æ–≤–∞—Ä–∞

#### –ó–∞–∫–∞–∑—ã
- `POST /api/orders` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- `GET /api/orders/my` - –∑–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /api/orders/:id` - –¥–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞

#### –ü–ª–∞—Ç–µ–∂–∏
- `POST /api/payments/yookassa/create` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
- `POST /api/payments/yookassa/webhook` - –≤–µ–±—Ö—É–∫ –æ—Ç YooKassa

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch (`git checkout -b feature/amazing`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
4. Push –≤ branch (`git push origin feature/amazing`)
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

–í–∞—à–µ –∏–º—è - [@yourusername](https://github.com/yourusername)

---

‚≠ê –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –±—ã–ª –ø–æ–ª–µ–∑–µ–Ω, –ø–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥—É –Ω–∞ GitHub!






